<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script
    src="https://code.jquery.com/jquery-3.2.1.js"
    integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
    crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link href="clientlibs/stylesheets/global-ribbon.css" rel="stylesheet" />
    <link href="clientlibs/stylesheets/jefferson-health.css" rel="stylesheet" />
    <link href="clientlibs/stylesheets/jefferson-health-subpage.css" rel="stylesheet" />

  </head>
  <body>
    <nav id="global-navigation" class="navbar navbar-default">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-global-navbar-collapse" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
            <a class="navbar-brand" href="http://www.jeffersonhealth.org"><img src="/etc/designs/jefferson-health/images/jefferson-health-logo.png" alt="Jefferson Health"></a>
          <div class="brand-skcc">
              Home of Sidney Kimmel Medical College
          </div>
        </div>
        <div id="bs-global-navbar-collapse" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
                <a class="nav-heading" href="#" data-toggle="dropdown">
                  All Locations<span class="caret"></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-left">
                  <li><a href="http://www.abingtonhealth.org/our-locations/" onClick="ga('send', 'event', 'Dropdowns', 'Click', 'Abington location'])" >Abington</a></li>
                  <li><a href="https://www.ariahealth.org/about-aria/campus-locations-and-outpatient-sites" onClick="ga('send', 'event', 'Dropdowns', 'Click', 'Aria location'])">Aria</a></li>
                  <li><a href="http://hospitals.jefferson.edu/find-a-location/?utm_source=jefferson&utm_medium=nav&utm_campaign=global" onClick="ga('send', 'event', 'Dropdowns', 'Click', 'Jefferson location'])">Jefferson</a></li>
  				<li><a href="https://www.kennedyhealth.org/facilities-directory?field_category=1571&title=&field_addressgeo_latlon_op=-&field_addressgeo_latlon=" onClick="ga('send', 'event', 'Dropdowns', 'Click', 'Kennedy location'])">Kennedy</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a class="nav-heading" href="#" data-toggle="dropdown">
                  Careers<span class="caret"></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-left">
                  <li><a href="http://www.abingtonhealth.org/JoinOurTeam/" onClick="ga('send', 'event', 'Dropdowns', 'Click', 'AH Careers'])">Abington</a></li>
                  <li><a href="https://www.ariahealth.org/careers-education" onClick="ga('send', 'event', 'Dropdowns', 'Click', 'Aria Careers'])">Aria</a></li>
                  <li><a href="http://hr.jefferson.edu/human-resources/careers.html?utm_source=jefferson&utm_medium=nav&utm_campaign=global" onClick="ga('send', 'event', 'Dropdowns', 'Click', 'JH Careers'])">Jefferson</a></li>
                    <li><a href="https://www.kennedyhealth.org/careers" onClick="ga('send', 'event', 'Dropdowns', 'Click', 'Kennedy Careers'])">Kennedy</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a class="nav-heading" href="#" data-toggle="dropdown">
                  Give Now<span class="caret"></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-left">
                  <li><a href="http://www.abingtonhealth.org/WaysOfGiving/" onClick="ga('send', 'event', 'Dropdowns', 'Click', 'Give AH'])">Abington</a></li>
                  <li><a href="https://w3.jefferson.edu/giving/aria.html" onClick="ga(‘send’, ‘event’, ‘Dropdowns', 'Click', ‘Give Aria’])">Aria</a></li>
                  <li><a href="https://w3.jefferson.edu/giving.cfm?utm_source=jefferson&utm_medium=nav&utm_campaign=global" onClick="ga('send, ‘event’, ‘Dropdowns', 'Click', ‘Give JH’])">Jefferson</a></li>
                    <li><a href="https://www.kennedyhealth.org/giving-kennedy-health-care-foundation" onClick="ga(‘send’, ‘event’, ‘Dropdowns', 'Click', ‘Give Kennedy’])">Kennedy</a></li>
                </ul>
            </li>
            <li class="hidden-xs hidden-sm">
              <div class="navbar-phone-1">
  		      <a href="http://hospitals.jefferson.edu/patients-and-visitors/make-an-appointment.html" data-tel-mobile="1-800-533-3669" onClick="ga('send', 'event', 'Navigation', 'Click', 'JEFF NOW'])" >Call 1-800-JEFF-NOW</a>
  		  </div>
            </li>
            <li>
              <a class="nav-heading" href="http://www.jefferson.edu/university.html" style="border-bottom: 0;" onClick="ga('send', 'event', 'Navigation', 'Click', 'University'])" >UNIVERSITY</a></li>
            <li class="visible-xs visible-sm" style="padding-top: 20px;">
              <div class="navbar-phone-2">
  		      <a href="http://hospitals.jefferson.edu/patients-and-visitors/make-an-appointment.html" data-tel-mobile="1-800-533-3669" onClick="ga('send', 'event', 'Navigation', 'Click', 'JEFF NOW'])" >1-800-JEFF-NOW</a>
  		  </div>
            </li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>

    <script>
    	$(document).ready(function() {
    		var is_mobile;

    		/* Detects mobile browser */
    		if( navigator.userAgent.match(/Mobi/i)
    			|| navigator.userAgent.match(/Android/i)
    			|| navigator.userAgent.match(/iPhone/i)
    			|| navigator.userAgent.match(/Silk/i)
    			|| navigator.userAgent.match(/Kindle/i)
    			|| navigator.userAgent.match(/BlackBerry/i)
    			|| navigator.userAgent.match(/Opera Mini/i)
    			|| navigator.userAgent.match(/Opera Mobi/i) ) {
    		   	is_mobile = true;
    		  	console.log("Device: mobile");
    		}
    		else {
    			is_mobile = false;
    			console.log("Device: desktop");
    		}

    		/* Sets link href */
    		$("#global-navigation .navbar-phone-1 > a, #global-navigation .navbar-phone-2 > a").click(function(e) {
    			if (is_mobile) {
    				var link_href = $(this).attr("data-tel-mobile");
    				link_href = link_href.replace(/\s+/g, ''); /* remove white space */
    				if (link_href.substr(0,4) != "tel:") {
    					link_href = "tel:" + link_href;
    					$(this).attr("href", link_href).attr("target","_blank"); /* new window for phone dialer */
    				}
    			}
    		});
    	});
  	</script>

    <header class="jh-header-container">
      <div class="jh-header">
          <div class="jh-header__inner">

            <div class="jh-banner">
              <div class="jh-banner__inner">

                <div class="jh-title">
                  <h1>Locations</h1>
                </div>

              </div>
            </div>

          </div>
      </div>
    </header>

    <section class="jh-navbar-container">
      <div class="jh-navbar">
        <div class="jh-navbar__inner">

          <div class="jh-breadcrumbs">
            <div class="jh-breadcrumbs__inner">
              Jefferson Health > Locations
            </div>
          </div>

        </div>
      </div>
    </section>

    <section class="jh-map-container">
      <div class="jh-map">
        <div class="jh-map__inner">

          <!-- Parsys goes here -->
          <div class="jh-map-component"></div>

        </div>
      </div>
    </section>

    <section class="jh-main-container">
      <div class="jh-main">
        <div class="jh-main__inner">

          <!-- Parsys goes here -->
          <div id="locations-list" class="jh-locations">
            <div class="jh-locations__inner">

              <div class="jh-locations__search">
                <input type="text" class="search" placeholder="Enter a location name" />
                <button id="filter-hospital">
                  hospital
                </button>
                <button id="filter-urgentcare">
                  urgent care
                </button>
                <button id="filter-outpatient">
                  outpatient
                </button>
                <button class="sort" data-sort="name" style="float: right;">
                  Sort by name
                </button>
              </div>

              <ul class="list jh-locations-list">
                <!-- <li class="jh-locations-list__item">
                  <div class="jh-location-card">
                    <div class="jh-location-card__inner">
                      <div class="jh-location-card__image">

                      </div>
                      <div class="name jh-location-card__title">
                        Thomas Jefferson University
                      </div>
                      <div class="jh-location-card__body">

                      </div>
                    </div>
                  </div>
                </li> -->
              </ul>
              <script>
              var json = (function() {
                var json = null;
                $.ajax({
                  'async': false,
                  'global': false,
                  'url': "/locationsdata.json",
                  'dataType': "json",
                  'success': function (data) {
                    json = data;
                  }
                });
                return json;
              })();

              jsonObj = json;

              var locationsListUI = $('.jh-locations-list');

              for (var key in jsonObj) {
                var obj = jsonObj[key];
                console.log(obj);
                for (var i = 0; i < obj.length; i++) {
                  console.log(obj[i].phone);
                  var category = obj[i].type;
                  var categoryStr;
                  if (category === 'hospital') {
                    categoryStr = 'Hospital';
                  } else if (category === 'outpatient') {
                    categoryStr = 'Outpatient';
                  } else if (category === 'urgent') {
                    categoryStr = 'Urgent Care';
                  } else {
                    categoryStr = '';
                  }
                  var phone = obj[i].phone;
                  var hours = obj[i].hours;
                  var bodyEl = $('<div>', {
                    class: 'jh-location-card__body'
                  });
                  bodyEl.append($('<p class="jh-location-card__address">' + obj[i].address + '</p>'));
                  if (phone) {
                    phone = phone.replace(/: /gi, ': <br>');
                    bodyEl.append($('<p class="jh-location-card__phone">' + phone + '</p>'));
                  }
                  if (hours) {
                    bodyEl.append($('<p class="jh-location-card__hours">' + hours + '</p>'));
                  }

                  // create new list item element
                  var newListItem = $('<li>',{
                    class: 'jh-locations-list__item',
                    html: $('<div>', {
                      class: 'jh-location-card',
                      html: $('<div>', {
                        class: 'jh-location-card__inner',
                        html: $('<div>', {
                          class: 'jh-location-card__image'
                        }).add('<div>', {
                          class: 'jh-location-card__category category',
                          attr: {
                            'data-category': category
                          },
                          html: categoryStr
                        }).add($('<div>', {
                          class: 'jh-location-card__title name',
                          html: $('<h4>' + obj[i].name + '</h4>')
                        })).add(bodyEl)
                      })
                    })
                  });
                  locationsListUI.append(newListItem);
                }
              }
              // for (var i = 0; i < jsonObj.hospitals.length; i++) {
              //   var phone = jsonObj.hospitals[i].phone;
              //   phone = phone.replace(/: /gi, ': <br>');
              //   var hours = jsonObj.hospitals[i].hours;
              //   var bodyEl = $('<div>', {
              //     class: 'jh-location-card__body'
              //   });
              //   bodyEl.append($('<p class="category">' + jsonObj.hospitals[i].type + '</p>'));
              //   bodyEl.append($('<p>' + jsonObj.hospitals[i].address + '</p>'));
              //   bodyEl.append($('<p>' + phone + '</p>'));
              //   if (hours) {
              //     bodyEl.append($('<p>' + hours + '</p>'));
              //   }
              //
              //   // create new list item element
              //   var newListItem = $('<li>',{
              //     class: 'jh-locations-list__item',
              //     html: $('<div>', {
              //       class: 'jh-location-card',
              //       html: $('<div>', {
              //         class: 'jh-location-card__inner',
              //         html: $('<div>', {
              //           class: 'jh-location-card__image'
              //         }).add($('<div>', {
              //           class: 'jh-location-card__title name',
              //           html: $('<h4>' + jsonObj.hospitals[i].name + '</h4>')
              //         })).add(bodyEl)
              //       })
              //     })
              //   });
              //   locationsListUI.append(newListItem);
              // }
              </script>
              <!-- <ul class="pagination"></ul> -->
            </div>
          </div>

        </div>
      </div>
    </section>

    <footer class="jh-footer-container">
      <div class="jh-footer">
        <div class="jh-footer__inner">



        </div>
      </div>
    </footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
    <script>
    var locationsList = new List('locations-list', {
      valueNames: [
        'name',
        { attr: 'data-category', name: 'category' }
      ],
      // page: 8,
      // pagination: true
    });

    $('#filter-hospital').on('click', function() {
      filterCategory('hospital');
    });
    $('#filter-urgentcare').on('click', function() {
      filterCategory('urgent');
    });
    $('#filter-outpatient').on('click', function() {
      filterCategory('outpatient');
    });

    function filterCategory(category) {
      locationsList.filter(function(item) {
      if (item.values().category.toLowerCase() === category) {
         return true;
      } else {
         return false;
      }
      }); // Only items with id > 1 are shown in list
    }
    //ocationsList.filter(); // Remove all filters

    function initLocations() {
      filterCategory('hospital');
      // $('#filter-hospitals').addClass('is-active');
    }

    initLocations();

    </script>
  </body>
</html>
